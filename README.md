# README for mSEMS Data Processing Script
## 1. Introduction

This script is designed for processing data files generated by the mSEMS (miniature Scanning Electrical Mobility Sizer) system, which is a state-of-the-art instrument used for determining the size and concentration of particles in various environments. The script helps in identifying the type of data file (raw, igor-inverted or uav-reader-inverted) and converts it into the netCDF format for further analysis.

## 2. mSEMS Overview

### 2.1 General Description

The mSEMS is a compact electrical mobility particle sizing module that combines a miniature Differential Mobility Analyser (DMA) column with sheath air flow control, high voltage control, and other electronic sensors. These functionalities allow for the precise selection of particles based on their size.

To measure particle concentration, the mSEMS needs to be operated alongside an advanced Mixing-based Condensation Particle Counter (aMCPC). Together, these instruments can measure size-resolved particle concentrations ranging from 5 to 375nm diameter (at 2.0 lpm sheath flow).

### 2.2 Applications

The design of the mSEMS and aMCPC focuses on compactness, low weight, and energy efficiency. This makes them particularly suitable for applications such as:

-Unmanned aerial vehicles
-Ultra-light aircraft
-Balloons (like BELUGA)
-Kites

and other scenarios where size, weight, and power consumption are critical factors.

### 2.3 Technical Specifications

A small recirculating pump in the system controls the DMA sheath flow rate between 2 and 3 lpm. This setup facilitates particle diameter selection in the range of 5 to 375 nm. With the maximum high voltage set at 3000 volts, the 150 msec response time of the aMCPC allows rapid size scanning in the mSEMS, achieving scan times as short as 5 seconds.

Laminar flow elements (LFE) are integrated into the system to measure the sample and sheath flow rates, ensuring accurate real-time volumetric flow rate control. Other specifications are detailed in the accompanying documentation.

The mSEMS can read particle pulse data from two aMCPCs: "MCPC A" (primary) and "MCPC B" (secondary). The secondary aMCPC typically measures the total concentration in the upstream sample flow.

## 3. Script Usage

To use the script, you will need to have Python installed along with the required libraries: pandas, numpy, xarray

TODO: requirements.txt

### 3.1 Running the Script


`python process_msems.py --file [path_to_data_file] --output_dir [path_to_output_directory]Â´

Replace [path_to_data_file] with the path to the data file you want to process, and [path_to_output_directory] with the directory where you want the converted file to be saved. The --output_dir argument is optional; if not provided, the script will save the output in the current working directory.

